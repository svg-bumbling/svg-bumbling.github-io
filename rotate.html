---
---

<div id='logo' class='text-center'></div>

<table class='table'>
  <tr>
    <td>Colour</td><td id='colour'></td>
  </tr>
<!--
  <tr>
    <td>Scale</td><td id='scale'></td>
  </tr>
  <tr>
    <td>Rotation</td><td id='rotation'></td>
  </tr>
-->
</table>


<script>
var odi_path = [
  'M408.9,32.2',
  'v61.1',
  'c-4.8-13.2-12.2-24.7-22.2-34.3',
  'c-9-8.6-19.8-15.3-32-19.9',
  'c-12.5-4.6-26.2-7-40.9-7',
  'l-84.8,0',
  'v61.4',
  'c-5-12.4-12.4-23.8-22.2-33.6',
  'c-18.9-18.9-43.9-29.3-70.6-29.3',
  'c-26.7,0-51.8,10.4-70.6,29.3',
  'c-18.9,18.9-29.2,43.9-29.2,70.6',
  'c0,26.7,10.4,51.8,29.2,70.6',
  'c18.9,18.9,43.9,29.3,70.6,29.3',
  'c26.7,0,51.8-10.4,70.6-29.3',
  'c9.7-9.7,17.2-21.1,22.2-33.6',
  'v61.3',
  'l84.8,0',
  'c14.7,0,28.4-2.4,40.9-7',
  'c12.3-4.6,23.1-11.3,32-19.9',
  'c10-9.6,17.4-21.2,22.2-34.3',
  'V229',
  'h93.5',
  'V32.2',
  //'H408.9',
  //'z'
]

var draw = SVG('logo').size('{{ site.data.attributes.logo.width }}', '{{ site.data.attributes.logo.height }}')
var logo = draw.path(odi_path.join())

window.onload = function start() {
    throb();
}

function throb() {
  var colour = '{{ site.data.attributes.logo.colour }}'
  var scale = 1.0
  var rotation = 1
  window.setInterval(function () {

    colour = drift(colour)
    $('#colour').text('#' + colour)
    logo.fill({
      color: '#' + colour
    })

    scale_rand = Math.random()
    if(scale_rand > 0.8) {
      scale += 0.1
    } else if(scale_rand < 0.2) {
      scale -= 0.1
    }
    $('#scale').text(scale)
    logo.animate().scale(scale)

    rotation_rand = Math.random()
    if(rotation_rand > 0.8) {
      rotation += 1
    } else if (rotation_rand < 0.2) {
      rotation -= 1
    }
    $('#rotation').text(rotation)
    logo.animate().rotate(rotation, Math.random() * {{ site.data.attributes.logo.width }}, Math.random() * {{ site.data.attributes.logo.height }})

  }, {{ site.data.attributes.interval }})
}

function step(value) {
  if(value == '00') {
    return '01'
  }
  if(value == 'ff') {
    return 'fe'
  }

  if(Math.random() > 0.5) {
    return String('0' + (parseInt(value, 16) + 1).toString(16)).slice(-2)
  } else {
    return String('0' + (parseInt(value, 16) - 1).toString(16)).slice(-2)
  }
}

function drift(hex) {
  var bytes = hex.match(/.{2}/g)
  var index = 2
  if(Math.random() < (1/3)) {
    index = 0
  } else if(Math.random() < (2/3)) {
    index = 1
  }

  bytes[index] = step(bytes[index])

  return bytes.join('')
}
</script>
