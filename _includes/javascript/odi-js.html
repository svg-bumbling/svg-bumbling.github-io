{% include paths/odi.html %}

var odi_grad = gradient('#fa8100', '#000000', 128)
var text_grad = gradient('#fa8100', '#ffffff', 128)

var colour = odi_grad[0]
var opacity = 1
var filler = {
  color: colour,
  opacity: opacity
}

var logo = SVG('canvas')
logo.viewbox({
  x: 0,
  y: 0,
  width: 467,
  height: 202
})

var badge = logo.path(odi_path.join(' ')).fill(colour)
var odi = logo.group()
odi.add(badge)

var word = getUrlVars()['word']
if(word === undefined) {
  word = 'labs'
}

var image = logo.image('https://farm2.staticflickr.com/1446/25137519363_368d730c65_h.jpg')
image.size(650, 650).y(-180).x(-80)
image.clipWith(badge)

var text = logo.text(word).move(232, 10).fill(text_grad[0])
text.font({
  family: 'Helvetica Neue',
  size: 100,
  anchor: 'middle'
})

// adding the text to the group destroys the clipping :/
//odi.add(text)

//window.onload = function start() {
//  pulse()
//}

function pulse() {
  var index = 0
  var interval = 25
  window.setInterval(function () {
    text.fill(text_grad[index])
    badge.fill(odi_grad[index])
    index += 1
    if(index == odi_grad.length) {
      index = 0
    }
  }, interval)
}

// what a fucking car-crash. from http://jquery-howto.blogspot.co.uk/2009/09/get-url-parameters-values-with-jquery.html
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}
